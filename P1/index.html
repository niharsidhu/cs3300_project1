<html>
<head>
<title>Project 1</title>
<link href="https://fonts.googleapis.com/css?family=Barlow+Condensed" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Signika" rel="stylesheet">
<script src="https://d3js.org/d3.v4.min.js"></script>
<link href="John.css"/>
<style>
p {
  text-align: center;
  color:#84bd00;
}
#Project1{
    font-family: 'Signika', sans-serif;
    font-weight: 700;
    font-style: normal;
    font-size: 48px;

}
body{
   background: #ecebe8;
}
#rectBox{

}

</style>
</head>
<body class="content">
<p id="Project1">
    Top Spotify Tracks: Populatriy and Uniqueness
    <br>
    <br>
<svg id="Key" height="10" width="10"></svg>
<svg id="Graph" height="10" width="10"></svg>
    <br>
    <br>
<svg id="BarcodeGraphs" height="10" width="10"></svg>
</p>

<script>
var keywidth= 800;
var keyheight= 80;

var width= 800;
var height= 600;

var wbars=800;
var hbars=800;

var keystart=260;



//sizes top graph to h x w
var graph = d3.select("#Graph")
    .attr("height", height)
    .attr("width", width);

var barcodeGraphs = d3.select("#BarcodeGraphs")
    .attr("height", hbars)
    .attr("width", wbars);

var KeyGraphs = d3.select("#Key")
    .attr("height", keyheight)
    .attr("width", keywidth);

//key
KeyGraphs.append("text")
    .attr("x", keystart)
    .attr("y", 45)
    .style("font-size", 20)
    .text("KEY:")
    .style("opacity", .65);
KeyGraphs.append("circle")
    .attr("cx", keystart+70)
    .attr("cy", 40)
    .attr("r", 5)
    .style("opacity", .35);
KeyGraphs.append("text")
    .attr("x", keystart+80)
    .attr("y", 42.5)
    .style("font-size", 12)
    .text("small")
    .style("opacity", .65);
KeyGraphs.append("circle")
    .attr("cx", keystart+140)
    .attr("cy", 40)
    .attr("r", 14)
    .style("opacity", .35);
KeyGraphs.append("text")
    .attr("x", keystart+160)
    .attr("y", 42.5)
    .style("font-size", 14)
    .text("med")
    .style("opacity", .65);
KeyGraphs.append("circle")
    .attr("cx", keystart+215)
    .attr("cy", 40)
    .attr("r", 20)
    .style("opacity", .35);
KeyGraphs.append("text")
    .attr("x", keystart+240)
    .attr("y", 42.5)
    .style("font-size", 16)
    .text("large")
    .style("opacity", .65);

//loads dat data
d3.json("Data.json", callback);

function callback (error, data) {
  songData = data;

//gets ranges of songdata ellements 
var rankExtent = d3.extent(songData, function (d){return d.rank;});
var countExtent = d3.extent(songData, function (d){return d.energy;});
var razExtent = d3.extent(songData, function (d){return d.loudness;});
//set scales
var rank = d3.scaleLinear()
    .domain(rankExtent)
    .range([20, width-20]);
var count = d3.scaleLinear()
    .domain(countExtent)
    .range([height-20, 20]);
var radSize = d3.scaleSqrt()
    .domain(razExtent)
    .range([5,20]);

//set axis
var xAxis2 = d3.axisBottom()
    .scale(rank)
    .ticks(3);
var yAxis2 = d3.axisLeft()
    .scale(count)
    .ticks(5);
//add axis as lines via append
var graph = d3.select("#graph");
graph 
    .append("line")
    .attr("x1", width/2)
    .attr("y1", 0)
    .attr("x2", width/2)
    .attr("y2", height) 
    .attr("stroke", "black")
    .attr("stroke-width", 3);

graph
    .append("line")
    .attr("x1", 0)
    .attr("y1", height/2)
    .attr("x2", width)
    .attr("y2", height/2) 
    .attr("stroke", "black")
    .attr("stroke-width", 3);


//loop to add song 
songData.forEach(function(d){
  graph.append("circle")
    .attr("cx", rank(d.rank))
    .attr("cy", count(d.energy))
    .attr("r", radSize(d.loudness))
    .style("opacity", .35);
});
//Labels
graph.append("text")
    .attr("x", 0)
    .attr("y", 12)
    .style("font-size", 16)
    .text("Quad A")
    .style("opacity", .65);
graph.append("text")
    .attr("x", width-75)
    .attr("y", 12)
    .style("font-size", 16)
    .text("Quad B")
    .style("opacity", .65);
graph.append("text")
    .attr("x", 0)
    .attr("y", height-10)
    .style("font-size", 16)
    .text("Quad C")
    .style("opacity", .65);
graph.append("text")
    .attr("x", width-75)
    .attr("y", height-10)
    .style("font-size", 16)
    .text("Quad D")
    .style("opacity", .65);














/////////////////Start of Bargraphs/////////////////////
BarOffset=50;
BarStart=80;
BarHeight=40;
BarStart1=180;
BarStart2=280;

bHeightStart=BarStart;
bHeightEnd=BarStart-BarHeight;

bHeightStart1=BarStart1;
bHeightEnd1=BarStart1-BarHeight;

bHeightStart2=BarStart2;
bHeightEnd2=BarStart2-BarHeight;

bWidthStart= 0+BarOffset;
bWidthEnd= wbars- (2*BarOffset);

//Barcode Graph Tree
var aExtent = d3.extent(songData, function (d){return d.speechiness;});
var aScale = d3.scaleLinear()
    .domain(aExtent)
    .range([bWidthStart, bWidthEnd]);
barcodeGraphs.append("rect")
    .attr("x", bWidthStart)
    .attr("y", BarStart-BarHeight)
    .attr("width", bWidthEnd)
    .attr("height", (BarHeight))
    .attr("class", "rectBox")
    .attr("Stroke","black")
    .attr("stroke-width", "1")
    .style("opacity", 1)
    .style("fill", "transparent");
barcodeGraphs.append("text")
    .attr("x", bWidthStart)
    .attr("y", BarStart-BarHeight-5)
    .style("font-size", 16)
    .text("Speechiness")
    .style("opacity", .65);
barcodeGraphs.append("text")
    .attr("x", bWidthStart)
    .attr("y", BarStart+10)
    .style("font-size", 12)
    .text(aExtent[0].toFixed(3))
    .style("opacity", .65);
barcodeGraphs.append("text")
    .attr("x", wbars-BarOffset)
    .attr("y", BarStart+10)
    .style("font-size", 12)
    .text(aExtent[1].toFixed(3))
    .style("opacity", .65);
songData.forEach(function(d){
  barcodeGraphs.append("line")
    .attr("x1", bWidthStart+(aScale(d.speechiness)))
    .attr("y1", bHeightStart)
    .attr("x2", bWidthStart+(aScale(d.speechiness)))
    .attr("y2", bHeightEnd)
    .attr("stroke", "black")
    .attr("stroke-width", "1")
    .style("opacity", .45);
});

//Barcode Graph Two
var bExtent = d3.extent(songData, function (d){return d.energy;});
var bScale = d3.scaleLinear()
    .domain(bExtent)
    .range([bWidthStart, bWidthEnd]);

barcodeGraphs.append("rect")
    .attr("x", bWidthStart)
    .attr("y", BarStart1-BarHeight)
    .attr("width", bWidthEnd)
    .attr("height", (BarHeight))
    .attr("class", "rectBox")
    .attr("Stroke","black")
    .attr("stroke-width", "1")
    .style("opacity", 1)
    .style("fill", "transparent");
barcodeGraphs.append("text")
    .attr("x", bWidthStart)
    .attr("y", BarStart1-BarHeight-5)
    .style("font-size", 16)
    .text("Energy")
    .style("opacity", .65);
barcodeGraphs.append("text")
    .attr("x", bWidthStart)
    .attr("y", BarStart1+10)
    .style("font-size", 12)
    .text(bExtent[0].toFixed(3))
    .style("opacity", .65);
barcodeGraphs.append("text")
    .attr("x", wbars-BarOffset)
    .attr("y", BarStart1+10)
    .style("font-size", 12)
    .text(bExtent[1].toFixed(3))
    .style("opacity", .65);
songData.forEach(function(d){
  barcodeGraphs.append("line")
    .attr("x1", bWidthStart+(bScale(d.energy)))
    .attr("y1", bHeightStart1)
    .attr("x2", bWidthStart+(bScale(d.energy)))
    .attr("y2", bHeightEnd1)
    .attr("stroke", "black")
    .attr("stroke-width", "1")
    .style("opacity", .45);
});


//Barcode Graph Three
var cExtent = d3.extent(songData, function (d){return d.loudness;});
var cScale = d3.scaleLinear()
    .domain(cExtent)
    .range([bWidthStart, bWidthEnd]);

barcodeGraphs.append("rect")
    .attr("x", bWidthStart)
    .attr("y", BarStart2-BarHeight)
    .attr("width", bWidthEnd)
    .attr("height", (BarHeight))
    .attr("class", "rectBox")
    .attr("Stroke","black")
    .attr("stroke-width", "1")
    .style("opacity", 1)
    .style("fill", "transparent");
barcodeGraphs.append("text")
    .attr("x", bWidthStart)
    .attr("y", BarStart2-BarHeight-5)
    .style("font-size", 16)
    .text("Loudness")
    .style("opacity", .65);
barcodeGraphs.append("text")
    .attr("x", bWidthStart)
    .attr("y", BarStart2+10)
    .style("font-size", 12)
    .text(cExtent[0].toFixed(3))
    .style("opacity", .65);
barcodeGraphs.append("text")
    .attr("x", wbars-BarOffset)
    .attr("y", BarStart2+10)
    .style("font-size", 12)
    .text(cExtent[1].toFixed(3))
    .style("opacity", .65);
songData.forEach(function(d){
  barcodeGraphs.append("line")
    .attr("x1", bWidthStart+(cScale(d.loudness)))
    .attr("y1", bHeightStart2)
    .attr("x2", bWidthStart+(cScale(d.loudness)))
    .attr("y2", bHeightEnd2)
    .attr("stroke", "black")
    .attr("stroke-width", "1")
    .style("opacity", .45);
});

};
</script>

</html>